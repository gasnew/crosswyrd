name: Bears Without Number UI workflow

on: [workflow_dispatch]

defaults:
  run:
    working-directory: ./ui

jobs:
  build-and-deploy:

    runs-on: ubuntu-latest

    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2.3.1

      - name: Install and Build ğŸ”§
        run: |
          yarn install
          yarn build
          yarn test --passWithNoTests

      - name: Configure AWS credentials ğŸ”‘
        uses: aws-actions/configure-aws-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.PROD_AWS_ACCESS_KEY }}
          aws-secret-access-key: ${{ secrets.PROD_AWS_SECRET_ACCESS_KEY }}
          aws-region: us-east-1

      - name: Deploy ğŸš€
        run: |
          # TODO: Update this for crosswyrd
          #aws s3 sync build s3://bears-prod --delete
          #aws cloudfront create-invalidation \
            #--distribution-id EON4ECPYZT2N7 \
            #--paths "/index.html"
